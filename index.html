<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controla Ultra</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}

body{
background:radial-gradient(circle at 20% 20%,#25255a,#0c0c18 70%);
color:white;
display:flex;
min-height:100vh;
overflow-x:hidden;
}

/* SIDEBAR ORGÁNICO */
.sidebar{
width:100px;
background:rgba(255,255,255,0.05);
backdrop-filter:blur(20px);
padding:30px 15px;
display:flex;
flex-direction:column;
align-items:center;
gap:40px;
border-radius:50px;
margin:20px;
box-shadow:0 0 60px rgba(0,0,0,.5);
}

.sidebar button{
background:none;
border:none;
color:white;
font-size:13px;
cursor:pointer;
opacity:.5;
transition:.3s;
}

.sidebar button.active{
opacity:1;
transform:scale(1.1);
}

/* CONTENIDO */
.app{
flex:1;
padding:40px;
max-width:650px;
}

/* TITULOS */
h1{
font-size:32px;
margin-bottom:30px;
font-weight:600;
}

/* TARJETAS ORGÁNICAS */
.card{
background:rgba(255,255,255,0.07);
backdrop-filter:blur(25px);
padding:30px;
border-radius:50px;
margin-bottom:30px;
box-shadow:
0 30px 60px rgba(0,0,0,.5),
inset 0 1px 1px rgba(255,255,255,.05);
transition:.4s;
}

.card:hover{
transform:translateY(-6px);
}

.big{
font-size:42px;
font-weight:600;
margin-top:15px;
}

/* BOTONES */
button.primary{
margin-top:18px;
padding:16px;
border:none;
border-radius:50px;
background:linear-gradient(135deg,#8a7bff,#00f2ff);
color:white;
font-weight:600;
cursor:pointer;
transition:.3s;
}

button.primary:hover{
transform:scale(1.05);
}

/* INPUTS */
input,select{
width:100%;
padding:16px;
margin-top:14px;
border-radius:50px;
border:none;
background:rgba(255,255,255,0.1);
color:white;
}

/* HISTORIAL */
.mov{
display:flex;
justify-content:space-between;
padding:15px 0;
border-bottom:1px solid rgba(255,255,255,0.05);
font-size:15px;
}

/* METAS CIRCULARES */
.metaBubble{
background:rgba(255,255,255,0.05);
padding:30px;
border-radius:50px;
margin-bottom:25px;
text-align:center;
}

.metaCircle{
width:130px;
height:130px;
border-radius:50%;
margin:auto;
background:conic-gradient(#00f2ff var(--value),rgba(255,255,255,.1) 0);
display:flex;
align-items:center;
justify-content:center;
font-size:20px;
font-weight:600;
}

/* VISTAS */
.view{display:none;animation:fade .4s ease;}
.active{display:block;}

@keyframes fade{
from{opacity:0;transform:translateY(10px);}
to{opacity:1;transform:translateY(0);}
}

/* RESPONSIVE */
@media(max-width:768px){
body{flex-direction:column;}
.sidebar{
flex-direction:row;
width:90%;
height:80px;
justify-content:space-around;
margin:auto;
border-radius:50px;
}
.app{
padding:25px;
}
}
</style>
</head>

<body>

<div class="sidebar">
<button onclick="mostrar('inicio')" id="btnInicio" class="active">Inicio</button>
<button onclick="mostrar('registrar')" id="btnRegistrar">Registrar</button>
<button onclick="mostrar('metas')" id="btnMetas">Metas</button>
<button onclick="mostrar('historial')" id="btnHistorial">Historial</button>
<button onclick="mostrar('analisis')" id="btnAnalisis">Análisis</button>
</div>

<div class="app">

<!-- DASHBOARD -->
<div id="inicio" class="view active">
<h1>Dashboard</h1>
<div class="card">
<div>Saldo Total</div>
<div class="big" id="saldo">$0</div>
</div>
<div class="card">
<canvas id="pieChart"></canvas>
</div>
</div>

<!-- REGISTRAR -->
<div id="registrar" class="view">
<h1>Nuevo Movimiento</h1>
<div class="card">
<select id="tipo">
<option value="Ingreso">Ingreso</option>
<option value="Gasto">Gasto</option>
</select>
<input type="number" id="cantidad" placeholder="Cantidad">
<input type="text" id="categoria" placeholder="Categoría">
<button class="primary" onclick="addMovimiento()">Guardar</button>
</div>
</div>

<!-- METAS -->
<div id="metas" class="view">
<h1>Metas</h1>
<div class="card">
<input type="text" id="metaNombre" placeholder="Nombre meta">
<input type="number" id="metaMonto" placeholder="Monto objetivo">
<button class="primary" onclick="addMeta()">Crear</button>
</div>
<div id="metasLista"></div>
</div>

<!-- HISTORIAL -->
<div id="historial" class="view">
<h1>Historial</h1>
<div class="card" id="lista"></div>
</div>

<!-- ANALISIS -->
<div id="analisis" class="view">
<h1>Análisis</h1>
<div class="card">
<canvas id="barChart"></canvas>
</div>
</div>

</div>

<script>
let movimientos=JSON.parse(localStorage.getItem("movimientos"))||[];
let metas=JSON.parse(localStorage.getItem("metas"))||[];

let pieChart,barChart;

function mostrar(id){
document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
document.getElementById("btn"+id.charAt(0).toUpperCase()+id.slice(1)).classList.add("active");
render();
}

function addMovimiento(){
movimientos.push({
tipo:tipo.value,
cantidad:parseFloat(cantidad.value),
categoria:categoria.value
});
localStorage.setItem("movimientos",JSON.stringify(movimientos));
render();
}

function addMeta(){
metas.push({
nombre:metaNombre.value,
monto:parseFloat(metaMonto.value)
});
localStorage.setItem("metas",JSON.stringify(metas));
render();
}

function render(){
let ingresos=0,gastos=0;
movimientos.forEach(m=>{
if(m.tipo==="Ingreso") ingresos+=m.cantidad;
else gastos+=m.cantidad;
});

let saldoTotal=ingresos-gastos;
saldo.innerText="$"+saldoTotal.toLocaleString();

lista.innerHTML=movimientos.map(m=>
`<div class="mov">
<span>${m.categoria}</span>
<span style="color:${m.tipo==="Ingreso"?"#00ffcc":"#ff5e7e"}">
${m.tipo==="Ingreso"?"+":"-"}$${m.cantidad}
</span>
</div>`
).join("");

metasLista.innerHTML=metas.map(m=>{
let porcentaje=Math.min((saldoTotal/m.monto)*100,100);
return `<div class="metaBubble">
<h3>${m.nombre}</h3>
<div class="metaCircle" style="--value:${porcentaje}%">
${porcentaje.toFixed(0)}%
</div>
</div>`;
}).join("");

if(pieChart) pieChart.destroy();
if(barChart) barChart.destroy();

pieChart=new Chart(document.getElementById("pieChart"),{
type:"doughnut",
data:{
labels:["Ingresos","Gastos"],
datasets:[{
data:[ingresos,gastos],
backgroundColor:["#00ffcc","#ff5e7e"]
}]
},
options:{cutout:"75%",plugins:{legend:{display:false}}}
});

barChart=new Chart(document.getElementById("barChart"),{
type:"bar",
data:{
labels:["Ingresos","Gastos"],
datasets:[{
data:[ingresos,gastos],
backgroundColor:["#8a7bff","#00f2ff"]
}]
},
options:{plugins:{legend:{display:false}}}
});
}

render();
</script>

</body>
</html>
